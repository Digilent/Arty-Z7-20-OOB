Arty Z7-20 Out of Box Demo
==========================

Description
-----------
This repository contains the Out-of-Box Demo for the Arty Z7-20. It similar to the demo that comes preprogrammed on the board when shipped to customers. The demo uses a wide range of the board's peripherals, including the HDMI video inputs and outputs, audio output, LEDs, buttons, and USB-UART bridge.
The demo forwards signals from the HDMI input port to the HDMI output port. To use this feature of the demo, an HDMI capable computer and an HDMI capable monitor are required, as well as two HDMI cables.
When any button is pressed, an audio sample is generated by the Zynq processor and is streamed out over the audio output jack for approximately 4.5 seconds. The sample generated is a 261 Hz sine wave, also known as the musical note C4.
As long as the demo is running, the two RGB LEDs alternate cycling through the colors red, green, blue, and white.
The user LEDs are continuously set to the state of user buttons. When only one of the user switches is switched on, the LEDs are inverted.
Status messages are printed out over UART to a connected Serial Terminal. . See the Requirements section below for instructions on how to install and use an application to view these messages.

Requirements
------------
* **Arty Z7-20**
* **Vivado and Vitis 2020.1 Installations**
* **Serial Terminal Emulator Application**
* **MicroUSB Cable**
* **Headphones or Speaker with 3.5 mm Audio Jack**
* **HDMI Cable**
* **HDMI Capable Monitor/TV**

Demo Setup
----------

1. Download the most recent release ZIP archives from the repo's [releases page](https://github.com/Digilent/Arty-Z7-20-HDMI-In/releases). These files are called "Arty-Z7-20-OOB-hw.xpr.zip" and "Arty-Z7-20-OOB-sw.ide.zip". The -hw archive contains an exported XPR project file and associated sources for use with Vivado. The -sw archive contains exported project files for use with Vitis. Both of these files contain the build products of the associated tool.
  
  Note: Do not extract the downloaded -sw archive.
  
2. Open Vitis 2020.1. Choose an empty folder as the *Workspace* to launch into.
3. With Vitis opened, click the **Import Project** button, under **PROJECT** in the welcome screen.
4. Choose *Vitis project exported zip file* as the Import type, then click **Next**.
5. **Browse** for the downloaded -sw archive, and **Open** it.
6. Make sure that all boxes are checked in order to import each of the projects present in the archive will be imported, then click **Finish**.
7. Plug in the HDMI input and output cables to the HDMI source and the HDMI capable Monitor/TV. Plug the headphones/speaker into the AUDIO OUT port.
8. Open a serial terminal application (such as [Tera Term](https://ttssh2.osdn.jp/index.html.en) and connect it to the Arty Z7's serial port, using a baud rate of 115200.
9. In the *Assistant* pane at the bottom left of the Vitis window, right click on the project marked `[System]`, and select **Run** -> **Launch Hardware**. When the demo is finished launching, messages will be able to be seen through the serial terminal, and the demo can be used as described in this document's *Description* section, above.

To later make changes to the Vivado project and update the hardware platform in Vitis:

1. Extract the downloaded -hw archive.
2. Open Vivado 2020.1.
3. Open the XPR project file, found at \<archive extracted location\>/hw/hw.xpr, included in the extracted hardware release in Vivado 2020.1.
4. Make any desired modifications and regenerate the bitstream.
5. Use the File > Export > Export Hardware option to export a **Fixed**, **Post-synthesis** hardware platform (XSA) file to a memorable location.
6. In Vitis, right click on the *Platform* project, select **Update Hardware Specification**, then navigate to and select the exported XSA for import.
7. Rebuild and relaunch the application

Next Steps
----------
This demo can be used as a basis for other projects by modifying the hardware platform in the Vivado project's block design or by modifying the SDK application project.
Check out the Arty Z7's [Resource Center](https://reference.digilentinc.com/reference/programmable-logic/arty-z7/start) to find more documentation, demos, and tutorials.
For technical support or questions, please post on the [Digilent Forum](forum.digilentinc.com).

Known Issues
------------
* Parts of the HDMI passthrough do not meet timing.
* The audio sample can be "static-ey" at higher volumes/amplitudes.

Additional Notes
----------------
For more information on how this project is version controlled, refer to the [digilent-vivado-scripts repo](https://github.com/digilent/digilent-vivado-scripts) and [digilent-vitis-scripts](https://github.com/digilent/digilent-vitis-scripts) repositories.